this is a fully functional automaton